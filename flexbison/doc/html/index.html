<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>CComp: University of Nevada, Reno &lt;br/&gt;&lt;br/&gt; CS 660 - Compilers</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doc.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="unrLogo.jpg"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">CComp
   </div>
   <div id="projectbrief">A Minimalist C Compiler for CS 660 - Spring 2013</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">University of Nevada, Reno <br/>
<br/>
 CS 660 - Compilers </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><b>Authors:</b> Alex Fiannaca &amp; Sandeep Mathew </p>
<p><b>Due Date:</b> 05/15/2013</p>
<p><b>Submitted Materials: <a href="http://afiannac2.github.com/cs660/">GitHub</a></b></p>
<h3>Contents:</h3>
<ul>
<li>Description</li>
<li>Language Features</li>
<li>Implementation Details</li>
<li>Assumptions</li>
<li>Restrictions</li>
<li>How-To Section (compiling and running the project)</li>
</ul>
<h3>Description:</h3>
<p>This is the front end of a simple C compiler being written for the CS660 Compiler course at the University of Nevada, Reno (Spring 2013). In order to compile the scanner and parser, you must use the most recent versions of Flex and Bison, the GNU scanner and parser generators. In addition, if you wish to generate the documentation, you must have the most recent version of Doxygen. Finally, this compiler was specifically targetted at generating MARS MIPS Simulator compliant MIPS output. Therefore, all MIPS output from this compiler should be tested in the MARS Simulator.</p>
<p>Links to dependencies:</p>
<ul>
<li><a href="http://ftp.gnu.org/gnu/bison/">Bison 2.7</a></li>
<li><a href="http://flex.sourceforge.net/">Flex 2.5.37</a></li>
<li><a href="http://www.stack.nl/~dimitri/doxygen/download.html">Doxygen</a></li>
<li><a href="http://courses.missouristate.edu/kenvollmar/mars/">MARS Simulator</a></li>
</ul>
<p>For more information, contact <a href="#" onclick="location.href='mai'+'lto:'+'fia'+'nn'+'ac4'+'@l'+'ive'+'.c'+'om'; return false;">fiannac4@live.com</a></p>
<h3>Language Features: The C Programming Language</h3>
<p>This compiler is for the C programming language and is based off the specification description and grammar from K&amp;R. Advanced features of C such as the auto keyword functionality and the register keyword functionality have not been implemented. For a more specific list of what has been implemented and what has not been implemented, please see the "Restrictions" section below. Below is a list of the key features which have been implemented in this compiler:</p>
<ul>
<li>All of the basic mathematic operations have been implemented including addition, subtraction, multiplication, division, and modulo. Additionally, incrementors and decrementors have been implemented.</li>
<li>Arrays of integers are supported by the compiler. Arrays can be declared, values can be stored into arrays, and values can be retrieved from arrays.</li>
<li>All three of the C looping structures have been implemented including the FOR loop, the WHILE loop, and the DO WHILE loop.</li>
<li>Conditional C structures have been implemented (if/else).</li>
<li>Basic functions have been implemented (see the Restrictions section for more details).</li>
</ul>
<h3>Implementation Details</h3>
<p>This compiler consists of two separate programs (ccomp and <a class="el" href="classtac2mips.html">tac2mips</a>) each of which is broken down into several classes that work together to generate assembly code. The code for this project can be accessed through the GitHub repository for the project. The main classes for the ccomp front end program are as follows:</p>
<ul>
<li><b><a class="el" href="classCCompiler.html" title="A minimalist C programming language compiler class.">CCompiler</a></b>: This class is the driver for the compiler. It brings together the scanner and parser in a unified manner by providing a single set of error and warning functions so that the scanner and parser do not have to implement their own. In addition, it redirects the output from the scanner and parser in a unified manner so that debugging is easier to perform. The instance of this class that is created when the program is run, can be found in the main.cpp file.</li>
<li><b><a class="el" href="CParser_8yy.html" title="NOTE: USE THE LINK BELOW TO VIEW THE SOURCE FOR THIS FILE, THE GENERATED DOCUMENTATION IS NOT VALID S...">CParser.yy</a></b>: This class is automatically generated by Bison from the <a class="el" href="CParser_8yy.html" title="NOTE: USE THE LINK BELOW TO VIEW THE SOURCE FOR THIS FILE, THE GENERATED DOCUMENTATION IS NOT VALID S...">CParser.yy</a> file.</li>
<li><b><a class="el" href="classAVLTree.html" title="An implementation of a balanced binary tree called an AVL tree.">AVLTree</a></b>: This class is used by the symbol table to maintain a balanced tree of symbols, thereby guaranteeing efficient interaction with the symbol table. This was implemented instead of using the STL map class, since the map class does not allow any method for printing the physical structure of the tree, and therefore cannot show that the tree is balanced (a project requirement).</li>
<li><b><a class="el" href="classSymTab.html">SymTab</a></b>: This class is the symbol table. It allows for inserting and search for symbols and manages the scoping restrictions of the compiler.</li>
<li><b><a class="el" href="classType.html">Type</a></b> (and all derived classes): This set of classes is used for maintaining information about the type of a symbol. There are 8 derived classes from the base <a class="el" href="classType.html">Type</a> class: pointers, functions, unions, structs, arrays, enums, and plain old data types (PODs). These classes allow for efficient management of descriptive information such as the capacity of an array or the size of a datatype (in bytes).</li>
</ul>
<p>Other Files:</p>
<ul>
<li><b>main.cpp</b>: This file creates an instance of the compiler and parses the command line arguments.</li>
<li><b><a class="el" href="Platform_8h.html" title="This file simply lists the size in bytes of the base data types.">Platform.h</a></b>: This file specifies the size of base types in our compiler.</li>
<li><b><a class="el" href="CScanner_8ll.html" title="NOTE: USE THE LINK BELOW TO VIEW THE SOURCE FOR THIS FILE, THE GENERATED DOCUMENTATION IS NOT VALID S...">CScanner.ll</a></b>: This file is passed to Flex in order to generate a scanner for the compiler. The output scanner is written in C++ compatible C and is therefore able to be compiled into the compiler.</li>
<li><b>tests/</b>: This folder contains several test cases which can be run with the run_tests bash script.</li>
</ul>
<p>After the ccomp front end program has been run, the <a class="el" href="classtac2mips.html">tac2mips</a> compiler backend must be run in order to translate the front end's three address code into MIPS assembly code. The main classes of this backend program are as follows:</p>
<ul>
<li><b><a class="el" href="classtac2mips.html">tac2mips</a></b>: This class is the main driver for the backend translation of 3AC to MIPS. This class manages the register allocation table, the address table, the function table, and other miscellaneous data structures.</li>
<li><b><a class="el" href="TAC__Parser_8yy_source.html">TAC_Parser.yy</a></b>: This class is automatically generated by Bison from the <a class="el" href="TAC__Parser_8yy_source.html">TAC_Parser.yy</a> file.</li>
<li><b><a class="el" href="classAddressTable.html">AddressTable</a></b>: This class is responsible for keeping track of any variables allocated in the program at a given point. This allows for storing variables from a register to memory or vice-versa as needed.</li>
<li><b><a class="el" href="classRegAllocTable.html">RegAllocTable</a></b>: This class is responsible for managing the ownership of the available registers throughout the program. If necessary, the register allocation table can perform spilling when the number of required registers exceeds the number of actual registers available in the instruction set.</li>
<li><b><a class="el" href="classFunctionTable.html">FunctionTable</a></b>: This class manages the functions in any given program by tracking the variables in a function, and the parameters to a function. This allows for simple tracking of which registers any given parameters are in (or possibly, the stack offset of a given parameter).</li>
<li><b>Event</b>: This is a simple implementation of the Observer/Observable pattern which is used by the register allocation table to inform the address table of any changes in the register locations of variables. This implementation was created by Tojo Thomas. See the header file <a class="el" href="Event_8h_source.html">Event.h</a> for citation information.</li>
</ul>
<p>Other Files:</p>
<ul>
<li><b>main.cpp</b>: This file creates an instance of the <a class="el" href="classtac2mips.html">tac2mips</a> compiler and runs it.</li>
<li><b><a class="el" href="TAC__Scanner_8ll_source.html">TAC_Scanner.ll</a></b>: This file is passed to Flex in order to generate a scanner for the 3AC to MIPS compiler. The output scanner is written in C++ compatible C and is therefore able to be compiled into the compiler.</li>
</ul>
<h3>Assumptions</h3>
<p>There were several assumptions when creating this compiler:</p>
<ul>
<li>The input file will be in ASCII encoding.</li>
</ul>
<h3>Restrictions</h3>
<ul>
<li>The main restriction in this compiler is that the compiler will abort after the first error (it will continue after warnings). We decided to do this in order to ensure that the output error is the correct error rather than outputting a series of errors in which only the first error is the real error (umm, gcc...).</li>
<li>Structs, unions, and enumerations are not supported</li>
<li>The compiler only currently supports integer variables. While, non-integer types can be correctly parsed by the ccomp front-end program, there is no support for non-integer types in the backend <a class="el" href="classtac2mips.html">tac2mips</a> program.</li>
<li>Functions cannot currently be passed more than four integer parameters as the only form of parameter passing supported by the backend <a class="el" href="classtac2mips.html">tac2mips</a> program is register based parameter passing.</li>
</ul>
<h3>How To: Compile this project</h3>
<p>Clone the repository using the following command: </p>
<pre class="fragment">git clone https://github.com/afiannac2/cs660.git
</pre><p>This repository is a private repository, meaning that you must be granted access rights before you can clone the repository, but since you are reading this, I am guessing you have been given rights.</p>
<p>Execute the following commands to compile the project: </p>
<pre class="fragment">cd cs660/flexbison/
make
</pre><p>This will run flex and bison and then compile all of the sources to produce the C Compiler front end executable <b>ccomp</b></p>
<p>Next, execute these commands to compile <a class="el" href="classtac2mips.html">tac2mips</a>: </p>
<pre class="fragment">cd mips/
make
cd ../
</pre><p>This will run flex and bison and will then compile all of the sources to produce the C compiler back end executable <b><a class="el" href="classtac2mips.html">tac2mips</a></b></p>
<h3>How To: Run this project</h3>
<p>The C Compiler can either be invoked manually by using the following commands </p>
<pre class="fragment">./ccomp -d lsp -v -o &lt;filename&gt;.out &lt;filename&gt;
mv &lt;filename&gt;.out &lt;filename&gt;.tac
mv &lt;filename&gt;.tac mips/tests/
cd mips/
./tac2mips &lt;filename&gt;.tac
cd ../
</pre><p>or by invoking the demo.sh script (<b>THE PREFERRED METHOD!</b>) </p>
<pre class="fragment">./demo.sh &lt;filename&gt;
</pre><p>When using the demo script, a test file should first be saved in the flexbison/tests/ directory. Then the demo script can be invoked from the flexbison/ directory by only passing the name of the file to the script (NOT THE PATH!).</p>
<p>Due to the fact that this demo script is quick a simple minded script, it will run each of the steps in the description of the manual commands above, regardless of whether or not one of the steps fails. Therefore, please check the output from the script to make sure that no errors were generated by the compiler while the set of commands were being executed. If any of the steps generated an error message, then the final output .tac and .asm files <b>are not valid and should be removed</b>.</p>
<p><b>Note on ccomp command line arguments</b>: The -d flag is intended for debugging purposes only. By passing the -d flag combinations of l, s, and/or p will print out debug info for the lexer, symbol table, and/or parser. The -v flag outputs verbose messages. This is also intended for debugging purposes only. The -o flag allows the user to specify the name of the output file. By default the output is written to the file TAC.out. None of these flags are required to be passed to the ccomp program. The simplest invocation of ccomp is the following, and will output all 3AC into the file TAC.out: </p>
<pre class="fragment">./ccomp &lt;filename&gt;
</pre><h3>How To: Generate the GraphVis Visualization of the <a class="el" href="classAST.html" title="Abstract syntax tree node type.">AST</a></h3>
<p>Running the compiler will generate a *.dot* output file which represents the <a class="el" href="classAST.html" title="Abstract syntax tree node type.">AST</a> in a GraphViz format. In order to generate a PNG image of the graph, run this command from the flexbison/ directory </p>
<pre class="fragment">dot -Tpng vis.dot -o vis.png
</pre><p>Note: if you are running this code on one of the computers in the ECC, then the version of GraphViz on your system may not support the png output format. In that case, the GraphViz image can be generated as a .eps image with the following command: </p>
<pre class="fragment">dot -Teps vis.dot -o vis.eps
</pre><h3>How To: Assemble and Test the <a class="el" href="classtac2mips.html">tac2mips</a> Output</h3>
<p>Download the MARS MIPS Simulator from the Missouri State University <a href="http://courses.missouristate.edu/kenvollmar/mars/">website</a>. Save the .jar file to your desktop and then run the following commands from the desktop directory to launch it: </p>
<pre class="fragment">java -jar &lt;MARS_jar_filename&gt;
</pre><p>In the MARS environment, open the *.asm files located in the flexbison/mips/tests folder. In the 'edit' pane for any of these assembly files, press F3 to assemble the code, and then press F5 to run the code. For more information on the expected output of each of the examples, click on the 'Examples' tab at the top of this webpage. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 14 2013 21:24:58 for CComp by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
